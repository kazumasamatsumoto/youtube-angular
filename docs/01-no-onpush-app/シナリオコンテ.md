# シナリオコンテ：ChangeDetectionStrategy.OnPushを全く使わないアプリケーション

## 📺 動画情報
- **タイトル**: ChangeDetectionStrategy.OnPushを全く使わないアプリケーション【でも動くんだよね】
- **カテゴリ**: Angular
- **想定時間**: 約10-15分
- **撮影形式**: スクリーンキャスト + ナレーション

---

## 🎬 シーン構成

### シーン1: オープニング（0:00-0:30）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 0:00-0:05 | チャンネルロゴ/タイトルカード | 「こんにちは、Angularクソチャンネルです！」 | 明るいBGM |
| 0:05-0:15 | サムネイル画像（警告マーク） | 「今日は、ChangeDetectionStrategy.OnPushを全く使わないアプリケーションを作ってみました。」 |  |
| 0:15-0:25 | 企画案のスライド | 「パフォーマンスがどれだけ悪化するか、実演してみます。」 |  |
| 0:25-0:30 | プロジェクトフォルダ | 「でも動くんだよね、という結論に至る予定です。それでは、いってみましょう！」 |  |

---

### シーン2: プロジェクト紹介（0:30-1:30）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 0:30-0:45 | IDEでプロジェクトを開く | 「まず、今回作成したアプリケーションを見てみましょう。」 | プロジェクト構造を表示 |
| 0:45-1:00 | プロジェクト構造のツリー表示 | 「このアプリは、意図的にOnPushを使わずに実装しています。」 | フォルダ構造をハイライト |
| 1:00-1:15 | READMEファイルを表示 | 「全コンポーネントがデフォルトのChangeDetectionStrategyを使用しています。」 | READMEの該当部分をハイライト |
| 1:15-1:30 | 警告コメントを表示 | 「本来は、パフォーマンス最適化のためにOnPushを使うべきなんですが、今回はあえて使いません。」 | コメントをズーム |

---

### シーン3: 親コンポーネントの実装（1:30-3:00）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 1:30-1:45 | parent.tsを開く | 「まず、親コンポーネントから見てみましょう。」 | ファイルを開く |
| 1:45-2:00 | @Componentデコレータをハイライト | 「このコンポーネントには、ChangeDetectionStrategy.OnPushが指定されていません。」 | デコレータ部分をズーム |
| 2:00-2:15 | コメントをハイライト | 「コメントで『注意: OnPushを使っていない！これがクソ実装のポイント』と書いてあります。」 | コメントを強調 |
| 2:15-2:30 | 正しい実装のコード例を表示 | 「本来は、changeDetection: ChangeDetectionStrategy.OnPush を使うべきなんです。」 | サイドバイサイド比較 |
| 2:30-2:45 | timerとintervalIdをハイライト | 「このコンポーネントは、100msごとにタイマーを更新しています。」 | 該当コードをハイライト |
| 2:45-3:00 | childCountをハイライト | 「50個の子コンポーネントを生成しています。」 | 数値を強調 |

---

### シーン4: 子コンポーネントの実装（3:00-5:00）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 3:00-3:15 | child.tsを開く | 「次に、子コンポーネントを見てみます。」 | ファイルを開く |
| 3:15-3:30 | @Componentデコレータをハイライト | 「この子コンポーネントも、OnPushを使っていません。」 | デコレータ部分をズーム |
| 3:30-3:45 | コメントをハイライト | 「親コンポーネントが変更検知されるたびに、この子コンポーネントも再評価されます。」 | コメントを強調 |
| 3:45-4:00 | 計算式を説明 | 「しかも、50個の子コンポーネントを生成しています。」 | 数値を強調 |
| 4:00-4:15 | 計算の説明 | 「つまり、親が1回変更検知されると、子コンポーネントが50回再評価されるんです。」 | 図解を表示 |
| 4:15-4:30 | calculateExpensiveValueをハイライト | 「さらに、各子コンポーネントで、毎回重い計算を実行しています。」 | メソッドをズーム |
| 4:30-4:45 | ループ部分をハイライト | 「このcalculateExpensiveValueメソッドは、1000回のループでランダムな値を計算しています。」 | ループ部分を強調 |
| 4:45-5:00 | 比較説明 | 「OnPushを使っていれば、この計算は不要な時に実行されないんですが...今回は、変更検知のたびに毎回実行されます。」 | 比較図を表示 |

---

### シーン5: パフォーマンスモニターの実装（5:00-7:00）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 5:00-5:15 | change-detection-counter.tsを開く | 「変更検知の回数をカウントするサービスを作りました。」 | ファイルを開く |
| 5:15-5:30 | recordDetectionメソッドをハイライト | 「各コンポーネントが変更検知されるたびに、このサービスに記録されます。」 | メソッドをズーム |
| 5:30-5:45 | performance-monitor.tsを開く | 「パフォーマンスモニターコンポーネントで、リアルタイムに変更検知の回数を表示します。」 | ファイルを開く |
| 5:45-6:00 | 表示ロジックを説明 | 「これで、どれだけ無駄な変更検知が発生しているか、視覚的に確認できます。」 | コードをハイライト |
| 6:00-6:15 | 正しい実装のコード例を表示 | 「本来の正しい実装では、このようにOnPushを指定します。」 | サイドバイサイド比較 |
| 6:15-6:30 | OnPushの効果を説明 | 「OnPushを使うことで、入力プロパティやイベントが発生した時だけ変更検知が実行されます。」 | 図解を表示 |
| 6:30-6:45 | パフォーマンス向上を説明 | 「これにより、不要な変更検知が大幅に削減され、パフォーマンスが向上します。」 | グラフを表示 |
| 6:45-7:00 | まとめ | 「でも、今回は使わないので、パフォーマンスがどれだけ悪化するか見てみましょう。」 | トランジション |

---

### シーン6: アプリの起動（7:00-7:30）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 7:00-7:10 | ターミナルでnpm start | 「それでは、アプリを起動してみます。」 | コマンドを実行 |
| 7:10-7:20 | ブラウザでアプリを開く | 「起動しました。パフォーマンスモニターが表示されています。」 | ブラウザを開く |
| 7:20-7:30 | パフォーマンスモニターをズーム | 「現在、変更検知の回数は0回です。」 | 数値を強調 |

---

### シーン7: パフォーマンスの悪化を実演（7:30-9:30）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 7:30-7:45 | パフォーマンスモニター（数秒後） | 「アプリを起動して、数秒経過しました。」 | 時間経過を表示 |
| 7:45-8:00 | 変更検知回数をズーム | 「パフォーマンスモニターを見てください。」 | 数値を大きく表示 |
| 8:00-8:15 | 数値が増えていく様子 | 「変更検知の回数が、すでに数千回に達しています！」 | 数値の変化を強調 |
| 8:15-8:30 | コンポーネント別の統計を表示 | 「わずか数秒で、これだけの変更検知が発生しています。」 | 統計表を表示 |
| 8:30-8:45 | Childコンポーネントの統計をハイライト | 「コンポーネント別に見ると、Childコンポーネントが大量に再評価されています。」 | 該当行をハイライト |
| 8:45-9:00 | 計算式を説明 | 「50個の子コンポーネントが、親の変更検知のたびに、毎回再評価されているんです。」 | 図解を表示 |
| 9:00-9:15 | 開発者ツールを開く | 「ブラウザの開発者ツールで、パフォーマンスを確認してみます。」 | DevToolsを開く |
| 9:15-9:30 | Performanceタブを表示 | 「CPU使用率が高くなっていますね。」 | グラフを表示 |

---

### シーン8: 詳細なパフォーマンス分析（9:30-11:00）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 9:30-9:45 | パフォーマンスグラフを表示 | 「変更検知が頻繁に発生していることが、パフォーマンスグラフからも分かります。」 | グラフをズーム |
| 9:45-10:00 | カウンターコンポーネントをハイライト | 「カウンターコンポーネントは、50msごとに自動でカウントアップしています。」 | カウンターを表示 |
| 10:00-10:15 | 変更検知の説明 | 「これにより、さらに頻繁に変更検知が発生しています。」 | タイムラインを表示 |
| 10:15-10:30 | 親コンポーネントのタイマーを表示 | 「親コンポーネントのタイマーは、100msごとに更新されています。」 | タイマーをハイライト |
| 10:30-10:45 | 組み合わせの説明 | 「これらの組み合わせで、大量の変更検知が発生しているんです。」 | 図解を表示 |
| 10:45-11:00 | 最終的な数値を表示 | 「現在、変更検知の回数は...（数値を読み上げ）」 | 数値を大きく表示 |

---

### シーン9: 問題点の紹介（11:00-12:00）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 11:00-11:15 | 子コンポーネントの再描画回数を表示 | 「各子コンポーネントの再描画回数を見てください。」 | リストを表示 |
| 11:15-11:30 | 再描画回数をズーム | 「すでに数百回、再描画されています。」 | 数値を強調 |
| 11:30-11:45 | コンソールを開く | 「でも、エラーは出ていません。」 | コンソールを表示 |
| 11:45-12:00 | アプリが動作している様子 | 「アプリは正常に動作しています。でも動くんだよね。ただし、パフォーマンスは最悪です。」 | アプリ全体を表示 |

---

### シーン10: まとめ（12:00-13:30）

| 時間 | 画面 | ナレーション | 備考 |
|------|------|-------------|------|
| 12:00-12:15 | パフォーマンスモニターの最終数値 | 「というわけで、ChangeDetectionStrategy.OnPushを全く使わないアプリケーションを作ってみました。」 | 数値を大きく表示 |
| 12:15-12:30 | 結果のまとめ | 「結果として、数秒で数千回の変更検知が発生し、パフォーマンスが著しく悪化しました。」 | グラフを表示 |
| 12:30-12:45 | アプリが動作している様子 | 「でも、アプリは正常に動作しています。でも動くんだよね。」 | 「でも動くんだよね」を強調 |
| 12:45-13:00 | 正しい実装へのリンクを表示 | 「実際のプロダクションでは、必ずOnPushを使用してください。正しい使い方については、説明欄にリンクを貼っておきます。」 | リンクを表示 |
| 13:00-13:15 | 次回予告 | 「次回は、RxJSのsubscribe地獄を作ってみます。ネストしたsubscribeを10階層まで作って、メモリリークを実演します。」 | 次回のサムネイルを表示 |
| 13:15-13:30 | エンディング | 「でも動くんだよね、という結論に至る予定です。チャンネル登録と高評価、よろしくお願いします！それでは、また次回！」 | チャンネルロゴを表示 |

---

## 📝 撮影時の注意点

### 画面構成
- **コード部分**: フォントサイズを大きく、重要な部分をハイライト
- **実行画面**: パフォーマンスモニターの数値が読みやすいようにズーム
- **開発者ツール**: Performanceタブのグラフがはっきり見えるように

### ナレーション
- **テンポ**: ゆっくりと、聞き取りやすく
- **強調**: 「でも動くんだよね」の部分は特に強調
- **数値**: 変更検知の回数など、具体的な数値を読み上げる

### エフェクト
- **ズーム**: 重要な部分をズームイン
- **ハイライト**: コードの重要な部分をハイライト
- **トランジション**: シーン間の切り替えをスムーズに

### BGM
- **導入**: 明るい、テンポの良いBGM
- **実装パート**: 落ち着いた、集中できるBGM
- **実行パート**: 緊張感のあるBGM（数値が増えていく様子）
- **まとめ**: 明るい、前向きなBGM

---

## 🎯 強調すべきポイント

1. ✅ **意図的にOnPushを使わない**ことを明確に
2. ✅ **パフォーマンスの悪化**を数値で示す
3. ✅ **エラーは出ない**（でも動く）ことを強調
4. ✅ **正しい実装方法**へのリンクを提供
5. ✅ **「でも動くんだよね」**のフレーズを繰り返し

---

**「でも動くんだよね」を合言葉に、Angularのクソ実装を楽しみながら学ぶ！**
